<div class="my-5">
  @if (query.data(); as pr) {
    <div class="flex flex-col items-start">
      <div class="flex items-center gap-4">
        <!-- Author Avatar -->
        @if (pr.author) {
          <div class="flex items-center gap-2 mt-2">
            <app-user-avatar [user]="pr.author" toolTipText="Author" tooltipPosition="top" />
          </div>
        }

        <div class="flex items-center gap-2 mt-2">
          <app-pull-request-status-icon [pullRequest]="pr" tooltipPosition="top" />

          <!-- PR Title -->
          <h2 class="text-2xl" [innerHTML]="pr.title | markdown"></h2>

          <!-- PR Number with Clickable Link -->
          <h2 class="text-2xl">
            <a [href]="pr.htmlUrl" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:underline"> #{{ pr.number }} </a>
          </h2>
        </div>
      </div>
    </div>
  } @else {
    <div class="flex flex-col items-start gap-2">
      <p-skeleton width="10rem" />
      <div class="flex items-center gap-4">
        <p-skeleton width="8rem" height="2rem" />
      </div>
    </div>
  }
</div>

<div class="flex flex-col gap-6 max-w-6xl mr-4">
  <app-pipeline [selector]="pipelineSelector()" />
  @if (query.data(); as pr) {
    @if (pr.headRefRepoNameWithOwner === pr.repository?.nameWithOwner) {
      <app-deployment-selection [sourceRef]="pr.headRefName" />
    }
  }
</div>
